<!-- "script/apps/Aries/Desktop/Functions/RechargeGuide.teen.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
<pe:mcml>
<script type="text/npl" refresh="true">
<![CDATA[

local ItemManager = System.Item.ItemManager;
local hasGSItem = ItemManager.IfOwnGSItem;
local equipGSItem = ItemManager.IfEquipGSItem;
local pageCtrl = document:GetPageCtrl();
local bean = MyCompany.Aries.Pet.GetBean();

function ClosePage()
  pageCtrl:CloseWindow();
end

function RefreshBag0()
    NPL.load("(gl)script/apps/Aries/VIP/PurChaseMagicBean.teen.lua");
    local PurchaseMagicBean = commonlib.gettable("MyCompany.Aries.Inventory.PurChaseMagicBean");
    PurchaseMagicBean.RefreshBag0()
end

function GetEMoneyByBank()
--	_guihelper.MessageBox("封测期间，暂不开放充值！");
	
	local url0 = string.format("http://pay.61.com/haqi2/processbank&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end

function GetEMoneyByPhone()
--	_guihelper.MessageBox("封测期间，暂不开放充值！");
	
	local url0 = string.format("http://pay.61.com/buy/paytype?type=phone&game=haqi&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end

function GetEMoneyByMobile()
--	_guihelper.MessageBox("封测期间，暂不开放充值！");
	
	local url0 = string.format("http://pay.61.com/buy/paytype?type=mobile&game=haqi&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end

function GetEMoneyByShiti()
--	_guihelper.MessageBox("封测期间，暂不开放充值！");
	
	local url0 = string.format("http://pay.61.com/buy/paytype?type=shiti&game=haqi&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end

function GetEMoneyByCard()
--	_guihelper.MessageBox("封测期间，暂不开放充值！");

	local url0 = string.format("http://pay.61.com/haqi2/processcard&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end

function GetEMoneyByAlipay()
--	_guihelper.MessageBox("封测期间，暂不开放充值！");

	local url0 = string.format("http://pay.61.com/haqi2/processalipay&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end

function GetEMoneyByMiBi()
	local url0 = string.format("http://pay.61.com/haqi2&");
	paraworld.auth.AuthUser({
		username = System.User.username,
		password = System.User.Password,
		}, "login", function (msg)
		if(msg.issuccess) then	
			-- successfully recovered from connection. 
			LOG.std("", "system","Login", "Successfully authenticated for pay");
			local payurl = string.format("%s&userid=%d&session=%s&gameid=21",url0,msg.nid,msg.sessionid);
			ParaGlobal.ShellExecute("open", payurl, "", "", 1);
            RefreshBag0();
		end
	end, nil, 20000, function(msg)	end);	
end
function ToGoPayURL()
    local payurl = string.format("http://pay.paraengine.com/index.php");
    ParaGlobal.ShellExecute("open", payurl, "", "", 1);
end

function ToGoHelpURL()
    local helpurl = string.format("http://cc.paraengine.com/twiki/bin/view/HaqiTeen/Haqi2Payhelp");
    ParaGlobal.ShellExecute("open", helpurl, "", "", 1);
end

]]></script>

<aries:window title="兑换金币" width="470" height="250" onhelp="" onclose="ClosePage()" mode="lite">
<!--  <div style="width:473px;height:306px;background:url(Texture/Aries/Common/ThemeTeen/pay/brownblock_32bits.png#0 0 32 32:6 6 6 6)" >  	-->
        <!--<div style="margin-left:50px; margin-top:10px;width:95px;height:32px;">
            <input type="button" class="defaultbutton" style="width:90px;height:30px;" value="米米卡" onclick="GetEMoneyByCard"  />
        </div>
        <div style="margin-left:50px; margin-top:5px;width:95px;height:32px;">
            <input type="button" class="default_btn_css" style="width:90px;height:30px;" value="银行卡" onclick="GetEMoneyByBank"  />
        </div>-->
        <!--<div style="float:left;margin-top:-90px;margin-left:150px;width:21px;height:73px;background:url(Texture/Aries/Common/branch_32bits.png#0 0 21 73)"></div>-->
        <div style="margin-left:130px; margin-top:15px;width:95px;height:32px;">
            <input type="button" style="width:200px;height:30px;font-size:14px;shadow-quality:8;shadow-color:#802a2e27;text-shadow:true;background:" value="金币可在《魔法哈奇2》中购买商城物品与服务。" />
            <input type="button" style="float: left;width: 200px; height: 30px; font-size: 14px; shadow-quality: 8; shadow-color: #802a2e27; text-shadow: true; background:" value="兑换比例：10金币/元" />
        </div>
        <div style="margin-left: 170px; margin-top: 40px; margin-bottom: 35px; width: 95px; height: 32px;">
            <input type="button" class="defaultbutton" style="width:120px;height:40px;" value="打开充值页面" onclick="ToGoPayURL" />
        </div>
    <!--<div style="float:left;margin-top:65px;margin-left:10px;width:30px;height:32px;background:url(Texture/Aries/Common/yellowarrow_32bits.png#0 0 30 32)"></div>-->

        <!--<div style="margin-left:50px; margin-top:10px;width:95px;height:32px;">
            <input type="button" class="default_btn_css" style="width:90px;height:30px;" value="固定电话" onclick="GetEMoneyByPhone"  />
        </div>
        <div style="margin-left:50px; margin-top:5px;width:95px;height:32px;">
            <input type="button" class="default_btn_css" style="width:90px;height:30px;" value="手机充值" onclick="GetEMoneyByMobile"  />
        </div>
        <div style="margin-left:50px; margin-top:5px;width:95px;height:32px;">
            <input type="button" class="default_btn_css" style="width:90px;height:30px;" value="其他" onclick="GetEMoneyByShiti"  />
        </div>
        <div style="float:left;margin-top:-90px;margin-left:150px;width:21px;height:73px;background:url(Texture/Aries/Common/branch_32bits.png#0 0 21 73)"></div>
        <div style="float:left;margin-top:-70px;margin-left:10px;width:30px;height:32px;background:url(Texture/Aries/Common/yellowarrow_32bits.png#0 0 30 32)"></div>
        <div style="margin-left:210px; margin-top:-70px;width:75px;height:32px;">
            <input type="button"  style="width:75px;height:30px;font-size:14px;shadow-quality:8;shadow-color:#802a2e27;text-shadow:true;background:" value="获得米币"  />
        </div>
        <div style="float:left;margin-top:-70px;margin-left:280px;width:30px;height:32px;background:url(Texture/Aries/Common/yellowarrow_32bits.png#0 0 30 32)"></div>
        <div style="margin-left:320px; margin-top:-70px;width:95px;height:32px;">
            <input type="button" class="default_btn_css" style="width:90px;height:30px;" value="兑换金币" onclick="GetEMoneyByMiBi"  />
        </div>-->

  
	  <!--<div style="width:450px;height:38px;margin-top:5px;margin-left:2px" class="spark_bg">-->
<!--	  	<div style="float:left;width:18px;height:18px;margin-top:10px;margin-left:10px;background:url(Texture/Aries/Common/ThemeTeen/others/mark0_32bits.png#0 0 18 18);"></div>
	  	<div style="color:#ffffff;font-size:14px;margin-left:35px;margin-top:-20px;shadow-quality:8;shadow-color:#802a2e27;text-shadow:true;">
            单笔每兑换<span style="color:#e0c427">100</span>金币即送魔法星<span style="color:#e0c427">VIP</span>能量石一颗
	  	</div>-->
	  <!--</div>-->
	  <div style="width:450px;height:38px;margin-left:2px" class="spark_bg">
	  	<div style="color:#ffffff;font-size:14px;margin-left:80px;margin-top:8px;shadow-quality:8;shadow-color:#802a2e27;text-shadow:true;">
            如果您在充值中遇到任何问题，请
            <input type="button" class="linkbutton" value='[点击查看]' tooltip='[点击查看]' onclick="ToGoHelpURL()" style="float: left; margin-left: 0px; width: 60px; text-align: center; margin-top: 0px; font-size: 11; color: #e0c427; height: 20px; " />
	  	</div>
	  </div>     			  
  
  
<!--  </div>  --> 
</aries:window>
</pe:mcml>
</body>
</html>
 